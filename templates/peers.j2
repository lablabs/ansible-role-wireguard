---
#
# This is simple jinja2 file used to generate peer variable based on dynami input.
#
{% for peer in wireguard_peers %}
- WireGuardPeer:
  - AllowedIPs: {{ wireguard_server_ip | ipmath(loop.index) }}/32
  - PublicKey: "{{ peer.publickey }}"
  - PresharedKeyFile: "{{ wireguard_presharedkey_path }}"
  - PersistentKeepalive: {{ peer.keepalive | default(wireguard_keepalive) }}
{% endfor %}